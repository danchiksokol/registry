{% extends 'base.html.twig' %}
{% use 'search/searchBar.html.twig' %}

{% block title %}Пользователи{% endblock %}
{% block body %}
    <div class="container">
    </div>
    {{ block('searchBar') }}
    <table class="table table-hover table-bordered">
        <thead>
        <tr>
            <th scope="col">№</th>
            <th scope="col">Ф.И.О.</th>
            <th scope="col">Место работы</th>
            <th scope="col">Должность</th>
            <th scope="col">Телефон</th>
            <th scope="col">Электронная почта</th>
            <th scope="col">Страна</th>
            <th scope="col">Город</th>
            <th scope="col">Статус</th>
        </tr>
        </thead>
        <tbody>
        {% for row in users %}
            <tr {% if row.active %} class="table-success" {% endif %}>
                <td>{{ row.id }}</td>
                <td class="fio" id="fio_{{ row.id }}">{{ row.lastname }} {{ row.Firstname }} {{ row.middlename }}</td>
                <td>{{ row.job }}</td>
                <td>{{ row.position }}</td>
                <td>{{ row.phone }}</td>
                <td>{{ row.email }}</td>
                <td>{{ row.country }}</td>
                <td>{{ row.city }}</td>
                <td>{% if not row.active %}<a type="button" class="btn btn-success" href="/active/{{ row.id }}">
                            Пришел</a> {% endif %}</td>
                <td><a type="button" class="btn btn-primary" id="print" onclick="CallPrint(document.getElementById('fio_{{ row.id }}'))">Печать</a></td>
                <td><a type="button" class="btn btn-secondary" href="/update/{{ row.id }}">Изменить</a></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <script>
        function CallPrint(fio) {
            var printContents = fio.innerHTML;
            var originalContents = document.body.innerHTML;
            document.body.innerHTML = printContents;
            window.print();
            document.body.innerHTML = originalContents;
        }
    </script>
{% endblock %}
